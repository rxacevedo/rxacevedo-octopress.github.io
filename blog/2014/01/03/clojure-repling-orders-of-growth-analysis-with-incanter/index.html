
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Clojure REPLing - Orders of Growth Analysis With Incanter - Roberto Acevedo</title>
  <meta name="author" content="Roberto Acevedo">

  
  <meta name="description" content="I&rsquo;ve been messing around with Incanter for the past two days now and have had a
great experience thus far, prompting me to write a little bit &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rxacevedo.github.io/blog/2014/01/03/clojure-repling-orders-of-growth-analysis-with-incanter">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Roberto Acevedo" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>

  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Roberto Acevedo</a></h1>
  
    <h2>Navel-gazing</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rxacevedo.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Clojure REPLing - Orders of Growth Analysis With Incanter</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-03T18:06:59-05:00" pubdate data-updated="true">Jan 3<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&rsquo;ve been messing around with Incanter for the past two days now and have had a
great experience thus far, prompting me to write a little bit about it. Incanter
is (as it states on <a href="http://incanter.org">the homepage</a>)  a computing and graphics
library built on the Clojure platform that strives to be semantically similar to R.
The true power in using Incanter, though (for me, anyways), is that it can be used
directly from the Clojure REPL working directly with Clojure data structures. Because
Clojure is so malleable, we can tranform our data easily and feed it directly into
Incanter, allowing us to observe statistics about the data as well as to plot it on
beautiful charts. The snippet below produces a line-chart based on data generated
using Clojure&rsquo;s time function:</p>

<figure class='code'><figcaption><span>Line Chart</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">coll-sizes</span> <span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nf">expt</span> <span class="mi">2</span> <span class="nv">%</span><span class="p">)</span> <span class="p">(</span><span class="nb">range </span><span class="mi">5</span> <span class="mi">10</span><span class="p">))</span> <span class="c1">;; Set up the collection sizes to be used</span>
</span><span class='line'>    <span class="nv">methods</span> <span class="p">[</span><span class="ss">&#39;rvrs</span> <span class="ss">&#39;my-rvrs</span> <span class="ss">&#39;reverse</span><span class="p">]]</span> <span class="c1">;; Hold method names in a collection as symbols                  </span>
</span><span class='line'>  <span class="p">(</span><span class="nb">-&gt; </span><span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">x</span> <span class="nv">methods</span>
</span><span class='line'>          <span class="nv">y</span> <span class="nv">coll-sizes</span>
</span><span class='line'>          <span class="ss">:let</span> <span class="p">[</span><span class="nv">z</span> <span class="p">(</span><span class="nb">binding </span><span class="p">[</span><span class="nv">*out*</span> <span class="p">(</span><span class="nf">java.io.StringWriter.</span><span class="p">)]</span> <span class="c1">;; Pipe stdout to a StringWriter (x * y instantiations)</span>
</span><span class='line'>                    <span class="p">(</span><span class="nb">time </span><span class="p">((</span><span class="nb">resolve </span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">range </span><span class="mi">0</span> <span class="nv">y</span><span class="p">)))</span> <span class="c1">;; Resolve x (symbol) to actual function and apply it to coll (size y), timing the running time and printing it to the StringWriter</span>
</span><span class='line'>                    <span class="p">(</span><span class="nf">-&gt;&gt;</span> <span class="p">(</span><span class="nb">.. </span><span class="nv">*out*</span> <span class="nv">toString</span><span class="p">)</span> <span class="c1">;; Retrieve output from StringWriter</span>
</span><span class='line'>                         <span class="p">(</span><span class="nb">re-find </span><span class="o">#</span><span class="s">&quot;\d+.\d+&quot;</span><span class="p">)</span> <span class="c1">;; Parse out the numeric value (running time)</span>
</span><span class='line'>                         <span class="nv">Double/parseDouble</span><span class="p">))]]</span>
</span><span class='line'>      <span class="p">[</span><span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">])</span> <span class="c1">;; Convert to double for plotting</span>
</span><span class='line'>    <span class="nv">to-dataset</span> <span class="c1">;; Convert the yielded list an Incanter dataset</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">with-data</span>
</span><span class='line'>      <span class="p">(</span><span class="nf">save-pdf</span> <span class="p">(</span><span class="nf">line-chart</span> <span class="ss">:col-1</span> <span class="ss">:col-2</span>
</span><span class='line'>                            <span class="ss">:group-by</span> <span class="ss">:col-0</span>
</span><span class='line'>                            <span class="ss">:x-label</span> <span class="s">&quot;coll-size&quot;</span>
</span><span class='line'>                            <span class="ss">:y-label</span> <span class="s">&quot;runtime (ms)&quot;</span>
</span><span class='line'>                            <span class="ss">:legend</span> <span class="nv">true</span><span class="p">)</span> <span class="s">&quot;/Users/Roberto/Desktop/reversals.pdf&quot;</span><span class="p">))))</span> <span class="c1">;; Plot the data and save it to a PDF</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; The for-comprehension yields a collection of this structure:</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; ([rvrs 32 0.086]</span>
</span><span class='line'><span class="c1">;;  [rvrs 64 0.145]</span>
</span><span class='line'><span class="c1">;;  [rvrs 128 0.485]</span>
</span><span class='line'><span class="c1">;;  [rvrs 256 1.717]</span>
</span><span class='line'><span class="c1">;;  [rvrs 512 7.809]</span>
</span><span class='line'><span class="c1">;;  [my-rvrs 32 0.018]</span>
</span><span class='line'><span class="c1">;;  [my-rvrs 64 0.016]</span>
</span><span class='line'><span class="c1">;;  [my-rvrs 128 0.024]</span>
</span><span class='line'><span class="c1">;;  [my-rvrs 256 0.042]</span>
</span><span class='line'><span class="c1">;;  [my-rvrs 512 0.082]</span>
</span><span class='line'><span class="c1">;;  [reverse 32 0.009]</span>
</span><span class='line'><span class="c1">;;  [reverse 64 0.007]</span>
</span><span class='line'><span class="c1">;;  [reverse 128 0.014]</span>
</span><span class='line'><span class="c1">;;  [reverse 256 0.028]</span>
</span><span class='line'><span class="c1">;;  [reverse 512 0.051])</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; And calling to-dataset on it yields this output in the REPL:</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; |  :col-0 | :col-1 | :col-2 |</span>
</span><span class='line'><span class="c1">;; |---------+--------+--------|</span>
</span><span class='line'><span class="c1">;; |    rvrs |     32 |  0.073 |</span>
</span><span class='line'><span class="c1">;; |    rvrs |     64 |  0.132 |</span>
</span><span class='line'><span class="c1">;; |    rvrs |    128 |  0.473 |</span>
</span><span class='line'><span class="c1">;; |    rvrs |    256 |  1.704 |</span>
</span><span class='line'><span class="c1">;; |    rvrs |    512 |  6.696 |</span>
</span><span class='line'><span class="c1">;; | my-rvrs |     32 |   0.01 |</span>
</span><span class='line'><span class="c1">;; | my-rvrs |     64 |  0.012 |</span>
</span><span class='line'><span class="c1">;; | my-rvrs |    128 |  0.022 |</span>
</span><span class='line'><span class="c1">;; | my-rvrs |    256 |  0.043 |</span>
</span><span class='line'><span class="c1">;; | my-rvrs |    512 |  0.078 |</span>
</span><span class='line'><span class="c1">;; | reverse |     32 |  0.007 |</span>
</span><span class='line'><span class="c1">;; | reverse |     64 |  0.011 |</span>
</span><span class='line'><span class="c1">;; | reverse |    128 |  0.014 |</span>
</span><span class='line'><span class="c1">;; | reverse |    256 |  0.026 |</span>
</span><span class='line'><span class="c1">;; | reverse |    512 |  0.054 |</span>
</span></code></pre></td></tr></table></div></figure>


<p>It generates <a href="/downloads/code/incanter/reversals.pdf">this PDF</a>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Roberto Acevedo</span></span>

      








  


<time datetime="2014-01-03T18:06:59-05:00" pubdate data-updated="true">Jan 3<span>rd</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/algorithms/'>algorithms</a>, <a class='category' href='/blog/categories/clojure/'>clojure</a>, <a class='category' href='/blog/categories/incanter/'>incanter</a>, <a class='category' href='/blog/categories/programming/'>programming</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://rxacevedo.github.io/blog/2014/01/03/clojure-repling-orders-of-growth-analysis-with-incanter/" data-via="rxacevedo" data-counturl="http://rxacevedo.github.io/blog/2014/01/03/clojure-repling-orders-of-growth-analysis-with-incanter/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/12/18/scala-and-clojure-list-operations/" title="Previous Post: Scala and Clojure List Operations">&laquo; Scala and Clojure List Operations</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/01/07/first-class-functions/" title="Next Post: First-class Functions">First-class Functions &raquo;</a>
      
    </p>
  </footer>
</article>


</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>A little something about me.</p>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rxacevedo">@rxacevedo</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rxacevedo',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Roberto Acevedo -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
