<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: incanter | Roberto Acevedo]]></title>
  <link href="http://rxacevedo.github.io/blog/categories/incanter/atom.xml" rel="self"/>
  <link href="http://rxacevedo.github.io/"/>
  <updated>2014-05-03T23:56:06-04:00</updated>
  <id>http://rxacevedo.github.io/</id>
  <author>
    <name><![CDATA[Roberto Acevedo]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Clojure REPLing - Orders of Growth Analysis With Incanter]]></title>
    <link href="http://rxacevedo.github.io/blog/2014/01/03/clojure-repling-orders-of-growth-analysis-with-incanter/"/>
    <updated>2014-01-03T18:06:59-05:00</updated>
    <id>http://rxacevedo.github.io/blog/2014/01/03/clojure-repling-orders-of-growth-analysis-with-incanter</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been messing around with Incanter for the past two days now and have had a
great experience thus far, prompting me to write a little bit about it. Incanter
is (as it states on <a href="http://incanter.org">the homepage</a>)  a computing and graphics
library built on the Clojure platform that strives to be semantically similar to R.
The true power in using Incanter, though (for me, anyways), is that it can be used
directly from the Clojure REPL working directly with Clojure data structures. Because
Clojure is so malleable, we can tranform our data easily and feed it directly into
Incanter, allowing us to observe statistics about the data as well as to plot it on
beautiful charts. The snippet below produces a line-chart based on data generated
using Clojure&rsquo;s time function:</p>

<p>``` clojure Line Chart
(let [coll-sizes (map #(expt 2 %) (range 5 10)) ;; Set up the collection sizes to be used</p>

<pre><code>  methods ['rvrs 'my-rvrs 'reverse]] ;; Hold method names in a collection as symbols                  
</code></pre>

<p>  (&ndash;> (for [x methods</p>

<pre><code>        y coll-sizes
        :let [z (binding [*out* (java.io.StringWriter.)] ;; Pipe stdout to a StringWriter (x * y instantiations)
                  (time ((resolve x) (range 0 y))) ;; Resolve x (symbol) to actual function and apply it to coll (size y), timing the running time and printing it to the StringWriter
                  (-&gt;&gt; (.. *out* toString) ;; Retrieve output from StringWriter
                       (re-find #"\d+.\d+") ;; Parse out the numeric value (running time)
                       Double/parseDouble))]] 
    [x y z]) ;; Convert to double for plotting
  to-dataset ;; Convert the yielded list an Incanter dataset
  (with-data 
    (save-pdf (line-chart :col-1 :col-2 
                          :group-by :col-0 
                          :x-label "coll-size" 
                          :y-label "runtime (ms)" 
                          :legend true) "/Users/Roberto/Desktop/reversals.pdf")))) ;; Plot the data and save it to a PDF
</code></pre>

<p>;; The for-comprehension yields a collection of this structure:</p>

<p>;; ([rvrs 32 0.086]
;;  [rvrs 64 0.145]
;;  [rvrs 128 0.485]
;;  [rvrs 256 1.717]
;;  [rvrs 512 7.809]
;;  [my-rvrs 32 0.018]
;;  [my-rvrs 64 0.016]
;;  [my-rvrs 128 0.024]
;;  [my-rvrs 256 0.042]
;;  [my-rvrs 512 0.082]
;;  [reverse 32 0.009]
;;  [reverse 64 0.007]
;;  [reverse 128 0.014]
;;  [reverse 256 0.028]
;;  [reverse 512 0.051])</p>

<p>;; And calling to-dataset on it yields this output in the REPL:</p>

<p>;; |  :col-0 | :col-1 | :col-2 |
;; |&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;|
;; |    rvrs |     32 |  0.073 |
;; |    rvrs |     64 |  0.132 |
;; |    rvrs |    128 |  0.473 |
;; |    rvrs |    256 |  1.704 |
;; |    rvrs |    512 |  6.696 |
;; | my-rvrs |     32 |   0.01 |
;; | my-rvrs |     64 |  0.012 |
;; | my-rvrs |    128 |  0.022 |
;; | my-rvrs |    256 |  0.043 |
;; | my-rvrs |    512 |  0.078 |
;; | reverse |     32 |  0.007 |
;; | reverse |     64 |  0.011 |
;; | reverse |    128 |  0.014 |
;; | reverse |    256 |  0.026 |
;; | reverse |    512 |  0.054 |</p>

<p>```</p>

<p>It generates <a href="/downloads/code/incanter/reversals.pdf">this PDF</a>.</p>
]]></content>
  </entry>
  
</feed>
